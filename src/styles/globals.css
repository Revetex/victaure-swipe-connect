
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;
    
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    
    --primary: 201 61% 62%;
    --primary-foreground: 213 48% 20%;
    
    --secondary: 217 19% 27%;
    --secondary-foreground: 220 13% 91%;
    
    --muted: 220 13% 91%;
    --muted-foreground: 213 48% 20%;
    
    --accent: 201 61% 62%;
    --accent-foreground: 213 48% 20%;
    
    --destructive: 0 84% 60%;
    --destructive-foreground: 220 13% 91%;
    
    --border: 201 61% 62%;
    --input: 220 13% 91%;
    --ring: 201 61% 62%;
    --radius: 0.75rem;

    --gradient-dots: rgba(27, 42, 74, 0.1);
    --primary-color: #64B5D9;
  }

  .dark {
    --background: 213 48% 20%;
    --foreground: 220 13% 91%;
    
    --card: 213 48% 20%;
    --card-foreground: 220 13% 91%;
    
    --popover: 213 48% 20%;
    --popover-foreground: 220 13% 91%;
    
    --primary: 201 61% 62%;
    --primary-foreground: 213 48% 20%;
    
    --secondary: 217 19% 27%;
    --secondary-foreground: 220 13% 91%;
    
    --muted: 217 19% 27%;
    --muted-foreground: 220 13% 91%;
    
    --accent: 201 61% 62%;
    --accent-foreground: 213 48% 20%;
    
    --destructive: 0 84% 60%;
    --destructive-foreground: 220 13% 91%;
    
    --border: 201 61% 62%;
    --input: 217 19% 27%;
    --ring: 201 61% 62%;

    --gradient-dots: rgba(100, 181, 217, 0.03);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Optimisation des images */
  img {
    @apply max-w-full h-auto object-cover;
    content-visibility: auto;
  }

  /* Amélioration du contraste des textes */
  p, h1, h2, h3, h4, h5, h6 {
    @apply dark:text-white/90 text-gray-900;
  }
}

@layer components {
  /* Card avec effet glassmorphique amélioré */
  .glass-card {
    @apply bg-white/10 dark:bg-black/10 
           backdrop-blur-lg 
           border border-white/20 dark:border-white/10 
           rounded-2xl shadow-lg
           hover:shadow-xl transition-all duration-300;
  }

  /* Image container optimisé pour mobile */
  .image-container {
    @apply relative overflow-hidden rounded-lg;
  }

  .image-container img {
    @apply w-full h-full object-cover transition-transform duration-300;
  }

  .image-container:hover img {
    @apply scale-105;
  }

  /* Image avec lazy loading et placeholder */
  .lazy-image {
    @apply relative bg-gray-200 dark:bg-gray-800 animate-pulse;
  }

  .lazy-image img {
    @apply transition-opacity duration-300;
  }

  .lazy-image.loaded {
    @apply animate-none;
  }

  /* Overlay pour images en mode sombre */
  .dark .image-overlay::after {
    content: '';
    @apply absolute inset-0 bg-black/10 pointer-events-none;
  }

  /* Styles de fond avec dégradés */
  .bg-gradient-primary {
    @apply bg-gradient-to-br from-[var(--primary-color)] to-[#1B2A4A];
  }

  .bg-gradient-secondary {
    @apply bg-gradient-to-br from-[#9b87f5] to-[#7E69AB];
  }

  /* Conteneurs avec effet glassmorphique */
  .glass-panel {
    @apply bg-white/5 dark:bg-black/5
           backdrop-blur-md
           border border-white/10 dark:border-white/5
           rounded-xl shadow-lg;
  }

  /* Boutons avec effet glassmorphique */
  .glass-button {
    @apply bg-white/10 dark:bg-black/10
           hover:bg-white/20 dark:hover:bg-black/20
           backdrop-blur-sm
           text-white
           rounded-lg px-4 py-2
           transition-all duration-300
           disabled:opacity-50
           disabled:cursor-not-allowed
           shadow-lg hover:shadow-xl
           active:scale-95;
  }

  /* Navigation avec effet glassmorphique */
  .glass-nav {
    @apply bg-white/70 dark:bg-black/70
           backdrop-blur-md
           border-b border-white/10 dark:border-white/5
           sticky top-0 z-50;
  }

  /* Texte avec dégradé */
  .text-gradient {
    @apply bg-gradient-to-r from-primary via-accent to-primary
           bg-clip-text text-transparent font-semibold;
  }
}

@layer utilities {
  /* Scrollbar personnalisée */
  .custom-scrollbar {
    @apply w-full overflow-auto;
    scrollbar-width: thin;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: rgba(100, 181, 217, 0.4);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: rgba(100, 181, 217, 0.6);
  }

  /* Optimisation des images */
  .image-optimize {
    @apply relative;
    aspect-ratio: 16/9;
  }

  .image-optimize img {
    @apply absolute inset-0 w-full h-full object-cover;
  }

  /* Support pour les images rétina */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .retina-optimize {
      image-rendering: -webkit-optimize-contrast;
      image-rendering: crisp-edges;
    }
  }

  /* Effet de flottement */
  .hover-float {
    @apply transition-transform duration-300 hover:-translate-y-1;
  }

  /* Animation de pulse subtile */
  .pulse-subtle {
    animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: .8; }
  }

  /* Transition douce pour les changements de mode */
  .theme-transition {
    @apply transition-colors duration-300;
  }
}

/* Support mobile amélioré */
@media (max-width: 640px) {
  .image-container {
    @apply rounded-lg overflow-hidden;
  }

  .image-container img {
    @apply w-full h-48 object-cover;
  }

  .glass-card {
    @apply rounded-xl;
  }

  .text-gradient {
    @apply text-base;
  }
}

/* Optimisation des performances sur mobile */
@supports (content-visibility: auto) {
  .mobile-optimize {
    content-visibility: auto;
    contain-intrinsic-size: 0 500px;
  }
}
